---
laytout: default
title: 谈程序的“通用性”
---


在现实的软件工程中，我经常发现这样的一种现象。本来用很简单的代码就可以
解决的问题，却因为设计者对“通用性”和“可扩展性”的需要，被搞得绕了几道弯，
让人琢磨不透。这些人的思维方式是这样的：“*将来*这段代码*可能*会被用到更
多的场合，所以我现在就考虑到扩展问题。”于是乎，他们在代码中加入了各种各
样的“框架结构”，目的是为了在将来有新的需要的时候，代码能够“不加修改”。

我并不否认“通用性”的价值，实际上我写出的程序通用性非常之强。可是很多人
所谓的“通用性”，其实达到的是适得其反的效果。

1. 代码需要被“重用”的场合，实际上比你想象的要少。

   我经常发现有人的代码连眼前的“特例”都没做好，就在开始“展望将来”，他们
   总是设想别人会“重用”这段代码。而实际上，由于他们的设计过于复杂，理解
   这设计所需的脑力开销，已经高于从头开始的代价，所以大部分人其实根本不
   会去重用他们的代码。

1. 由于这些“框架”的存在，带来了理解和维护这些框架的开销。

   首先每个程序员为了在这个框架下编写代码，都需要理解这种框架的构造，这
   带来了学习的人力开销。一旦发现这框架有设计问题，依赖于这种框架的代码
   就需要修改，这又带来了维护的开销。所以加入“通用性”之后，其实带来了更
   多的开销。这种开销能不能得到回报，依赖于很多因素。

1. “考虑”到通用性，并不等于你就准确地“把握”住了通用性。

   你很有可能没有准确的看到，到底是哪一个部分将来有可能需要修改，所以你
   设计的框架也许根本不能达到预期的目的。当有新的需要出现的时候，你的框
   架有可能根本不能避免大量的修改工作，它甚至会带来更多的工作。

